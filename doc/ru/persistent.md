# Описание хранения информации в хранилище
## Для чего нужно хранилище
Хранилище данных о ревизиях нужно для:

 * Сохранение информации об списке измененных файлов (в svn очень часто нужно 
 выяснять, в какой из предыдущих ревизий поменялся файл;
 * Сохранения информации о том, к какой ревизии/ветке относится коммит;
 * Сохранения идентификатора svn-репозитория.

Так же побочным эффектом служит формирование дерева с svn layout-ом для более
простой работы svn update/switch/log/diff и т.п. 

## Формат хранения информации о ревизиях
Для хранения информации о ревизиях используется ссылка `refs/git-as-svn/v1`.
 
Эта ссылка содержит в себе набор коммитов, выстроенных в цеполчку по первому 
родителю. Порядковый номер коммита от начала соответвует номеру ревизии в SVN.

### Содержимое коммита
Данные самого коммита:

 * Первый родитель всегда ссылается на предыдущий коммит;
 * Комментарий коммита берется из оригинального коммита. Именно этот комментарий выводится в svn log;
 * Автор коммита берется из оригинального коммита;
 
Дерево коммита:

 * svn (tree) - дерево, которое соответсвует svn layout-у данного коммита;
 * commit.ref (commit) - ссылка на оригинальный коммит (для коммитов, которые связаны с удалением/созданием веток может отсутствовать);

### Revision 0
Ревизия 0 несколько отличается от остальных коммитов.

В отличие от остальных коммитов:

 * Она всегда содержит путое дерево svn;
 * В ней лежит файл `uuid` с идентификатором репозитория.
